!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.PoissonDiskSampling=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a){for(var b=new Array(a),c=0;a>c;++c)b[c]=c;return b}b.exports=d},{}],2:[function(a,b,c){function d(a){return!!a.constructor&&"function"==typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}function e(a){return"function"==typeof a.readFloatLE&&"function"==typeof a.slice&&d(a.slice(0,0))}b.exports=function(a){return null!=a&&(d(a)||e(a)||!!a._isBuffer)}},{}],3:[function(a,b,c){b.exports=function(a,b){a=a||1,b=b||2;for(var c=2*a+1,d=Math.pow(c,b)-1,e=new Array(d),f=0;d>f;f++)for(var g=e[f]=new Array(b),h=d/2>f?f:f+1,i=1;b>=i;i++){var j=h%Math.pow(c,i);g[i-1]=j/Math.pow(c,i-1)-a,h-=j}return e}},{}],4:[function(a,b,c){function d(a,b){return a[0]-b[0]}function e(){var a,b=this.stride,c=new Array(b.length);for(a=0;a<c.length;++a)c[a]=[Math.abs(b[a]),a];c.sort(d);var e=new Array(c.length);for(a=0;a<e.length;++a)e[a]=c[a][1];return e}function f(a,b){var c=["View",b,"d",a].join("");0>b&&(c="View_Nil"+a);var d="generic"===a;if(-1===b){var f="function "+c+"(a){this.data=a;};var proto="+c+".prototype;proto.dtype='"+a+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+c+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+c+"(a){return new "+c+"(a);}",g=new Function(f);return g()}if(0===b){var f="function "+c+"(a,d) {this.data = a;this.offset = d};var proto="+c+".prototype;proto.dtype='"+a+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+c+"_copy() {return new "+c+"(this.data,this.offset)};proto.pick=function "+c+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+c+"_get(){return "+(d?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+c+"_set(v){return "+(d?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+c+"(a,b,c,d){return new "+c+"(a,d)}",g=new Function("TrivialArray",f);return g(l[a][0])}var f=["'use strict'"],h=i(b),j=h.map(function(a){return"i"+a}),k="this.offset+"+h.map(function(a){return"this.stride["+a+"]*i"+a}).join("+"),m=h.map(function(a){return"b"+a}).join(","),n=h.map(function(a){return"c"+a}).join(",");f.push("function "+c+"(a,"+m+","+n+",d){this.data=a","this.shape=["+m+"]","this.stride=["+n+"]","this.offset=d|0}","var proto="+c+".prototype","proto.dtype='"+a+"'","proto.dimension="+b),f.push("Object.defineProperty(proto,'size',{get:function "+c+"_size(){return "+h.map(function(a){return"this.shape["+a+"]"}).join("*"),"}})"),1===b?f.push("proto.order=[0]"):(f.push("Object.defineProperty(proto,'order',{get:"),4>b?(f.push("function "+c+"_order(){"),2===b?f.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===b&&f.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):f.push("ORDER})")),f.push("proto.set=function "+c+"_set("+j.join(",")+",v){"),d?f.push("return this.data.set("+k+",v)}"):f.push("return this.data["+k+"]=v}"),f.push("proto.get=function "+c+"_get("+j.join(",")+"){"),d?f.push("return this.data.get("+k+")}"):f.push("return this.data["+k+"]}"),f.push("proto.index=function "+c+"_index(",j.join(),"){return "+k+"}"),f.push("proto.hi=function "+c+"_hi("+j.join(",")+"){return new "+c+"(this.data,"+h.map(function(a){return["(typeof i",a,"!=='number'||i",a,"<0)?this.shape[",a,"]:i",a,"|0"].join("")}).join(",")+","+h.map(function(a){return"this.stride["+a+"]"}).join(",")+",this.offset)}");var o=h.map(function(a){return"a"+a+"=this.shape["+a+"]"}),p=h.map(function(a){return"c"+a+"=this.stride["+a+"]"});f.push("proto.lo=function "+c+"_lo("+j.join(",")+"){var b=this.offset,d=0,"+o.join(",")+","+p.join(","));for(var q=0;b>q;++q)f.push("if(typeof i"+q+"==='number'&&i"+q+">=0){d=i"+q+"|0;b+=c"+q+"*d;a"+q+"-=d}");f.push("return new "+c+"(this.data,"+h.map(function(a){return"a"+a}).join(",")+","+h.map(function(a){return"c"+a}).join(",")+",b)}"),f.push("proto.step=function "+c+"_step("+j.join(",")+"){var "+h.map(function(a){return"a"+a+"=this.shape["+a+"]"}).join(",")+","+h.map(function(a){return"b"+a+"=this.stride["+a+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var q=0;b>q;++q)f.push("if(typeof i"+q+"==='number'){d=i"+q+"|0;if(d<0){c+=b"+q+"*(a"+q+"-1);a"+q+"=ceil(-a"+q+"/d)}else{a"+q+"=ceil(a"+q+"/d)}b"+q+"*=d}");f.push("return new "+c+"(this.data,"+h.map(function(a){return"a"+a}).join(",")+","+h.map(function(a){return"b"+a}).join(",")+",c)}");for(var r=new Array(b),s=new Array(b),q=0;b>q;++q)r[q]="a[i"+q+"]",s[q]="b[i"+q+"]";f.push("proto.transpose=function "+c+"_transpose("+j+"){"+j.map(function(a,b){return a+"=("+a+"===undefined?"+b+":"+a+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+c+"(this.data,"+r.join(",")+","+s.join(",")+",this.offset)}"),f.push("proto.pick=function "+c+"_pick("+j+"){var a=[],b=[],c=this.offset");for(var q=0;b>q;++q)f.push("if(typeof i"+q+"==='number'&&i"+q+">=0){c=(c+this.stride["+q+"]*i"+q+")|0}else{a.push(this.shape["+q+"]);b.push(this.stride["+q+"])}");f.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),f.push("return function construct_"+c+"(data,shape,stride,offset){return new "+c+"(data,"+h.map(function(a){return"shape["+a+"]"}).join(",")+","+h.map(function(a){return"stride["+a+"]"}).join(",")+",offset)}");var g=new Function("CTOR_LIST","ORDER",f.join("\n"));return g(l[a],e)}function g(a){if(j(a))return"buffer";if(k)switch(Object.prototype.toString.call(a)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(a)?"array":"generic"}function h(a,b,c,d){if(void 0===a){var e=l.array[0];return e([])}"number"==typeof a&&(a=[a]),void 0===b&&(b=[a.length]);var h=b.length;if(void 0===c){c=new Array(h);for(var i=h-1,j=1;i>=0;--i)c[i]=j,j*=b[i]}if(void 0===d){d=0;for(var i=0;h>i;++i)c[i]<0&&(d-=(b[i]-1)*c[i])}for(var k=g(a),m=l[k];m.length<=h+1;)m.push(f(k,m.length-1));var e=m[h+1];return e(a,b,c,d)}var i=a("iota-array"),j=a("is-buffer"),k="undefined"!=typeof Float64Array,l={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};b.exports=h},{"iota-array":1,"is-buffer":2}],5:[function(a,b,c){"use strict";function d(a){switch(a){case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float":case"float32":return Float32Array;case"double":case"float64":return Float64Array;case"uint8_clamped":return Uint8ClampedArray;case"generic":case"buffer":case"data":case"dataview":return ArrayBuffer;case"array":return Array}}var e=a("ndarray");b.exports=function(a,b){b=b||"float64";for(var c=1,f=0;f<a.length;++f)c*=a[f];return e(new(d(b))(c),a)}},{ndarray:4}],6:[function(a,b,c){"use strict";var d=a("zeros"),e=a("moore"),f=a("./sphere-random"),g=function(a,b){for(var c=0,d=0;d<a.length;d++)c+=Math.pow(a[d]-b[d],2);return c},h=function(a){var b,c=e(2,a),d=[];for(b=0;a>b;b++)d.push(0);return c.push(d),c.sort(function(b,c){for(var d=0,e=0,f=0;a>f;f++)d+=Math.pow(b[f],2),e+=Math.pow(c[f],2);return e>d?-1:d>e?1:0}),c},i=function(a,b,c,e,f){c=c||2*b,this.shape=a,this.dimension=this.shape.length,this.minDistance=b,this.squaredMinDistance=b*b,this.deltaDistance=c-b,this.cellSize=b/Math.sqrt(this.dimension),this.maxTries=e||30,this.rng=f||Math.random,this.neighbourhood=h(this.dimension),this.currentPoint=null,this.processList=[],this.samplePoints=[],this.gridShape=[];for(var g=0;g<this.dimension;g++)this.gridShape.push(Math.ceil(a[g]/this.cellSize));this.grid=d(this.gridShape,"uint32")};i.prototype.shape=null,i.prototype.dimension=null,i.prototype.minDistance=null,i.prototype.squaredMinDistance=null,i.prototype.deltaDistance=null,i.prototype.cellSize=null,i.prototype.maxTries=null,i.prototype.rng=null,i.prototype.neighbourhood=null,i.prototype.currentPoint=null,i.prototype.processList=null,i.prototype.samplePoints=null,i.prototype.gridShape=null,i.prototype.grid=null,i.prototype.addRandomPoint=function(){for(var a=new Array(this.dimension),b=0;b<this.dimension;b++)a[b]=this.rng()*this.shape[b];return this.directAddPoint(a)},i.prototype.addPoint=function(a){var b,c=!0;if(a.length===this.dimension)for(b=0;b<this.dimension&&c;b++)c=a[b]>=0&&a[b]<=this.shape[b];else c=!1;return c?this.directAddPoint(a):null},i.prototype.directAddPoint=function(a){var b,c=0,d=this.grid.stride;for(this.processList.push(a),this.samplePoints.push(a),b=0;b<this.dimension;b++)c+=(a[b]/this.cellSize|0)*d[b];return this.grid.data[c]=this.samplePoints.length,a},i.prototype.inNeighbourhood=function(a){var b,c,d,e,f,h=this.dimension,i=this.grid.stride;for(b=0;b<this.neighbourhood.length;b++){for(c=0,d=0;h>d;d++)e=(a[d]/this.cellSize|0)+this.neighbourhood[b][d],e>=0&&e<this.gridShape[d]&&(c+=e*i[d]);if(0!==this.grid.data[c]&&(f=this.samplePoints[this.grid.data[c]-1],g(a,f)<this.squaredMinDistance))return!0}return!1},i.prototype.next=function(){for(var a,b,c,d,e,g,h;this.processList.length>0;){for(null===this.currentPoint&&(this.currentPoint=this.processList.shift()),d=this.currentPoint,a=0;a<this.maxTries;a++){for(g=!0,c=this.minDistance+this.deltaDistance*this.rng(),2===this.dimension?(b=this.rng()*Math.PI*2,e=[Math.cos(b),Math.sin(b)]):e=f(this.dimension,this.rng),h=0;g&&h<this.dimension;h++)e[h]=d[h]+e[h]*c,g=e[h]>=0&&e[h]<=this.shape[h]-1;if(g&&!this.inNeighbourhood(e))return this.directAddPoint(e)}a===this.maxTries&&(this.currentPoint=null)}return null},i.prototype.fill=function(){for(0===this.samplePoints.length&&this.addRandomPoint();this.next(););return this.samplePoints},i.prototype.getAllPoints=function(){return this.samplePoints},i.prototype.reset=function(){var a=this.grid.data,b=0;for(b=0;b<a.length;b++)a[b]=0;this.samplePoints=[],this.currentPoint=null,this.processList.length=0},b.exports=i},{"./sphere-random":7,moore:3,zeros:5}],7:[function(a,b,c){"use strict";function d(a,b){var c,d,e,f,g,h=new Array(a),i=Math.floor(a/2)<<1,j=0;for(g=0;i>g;g+=2)c=-2*Math.log(b()),d=Math.sqrt(c),e=2*Math.PI*b(),j+=c,h[g]=d*Math.cos(e),h[g+1]=d*Math.sin(e);if(a%2){var k=Math.sqrt(-2*Math.log(b()))*Math.cos(2*Math.PI*b());h[a-1]=k,j+=Math.pow(k,2)}for(f=1/Math.sqrt(j),g=0;a>g;++g)h[g]*=f;return h}b.exports=d},{}]},{},[6])(6)});
